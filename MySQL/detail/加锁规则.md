加锁的基础是对索引加临键锁，对于不同的唯一索引/非唯一索引，范围查询/等值查询的情况下规则略有不同。