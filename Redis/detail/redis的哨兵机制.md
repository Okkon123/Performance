哨兵会定期向主节点发送 PING 命令，检查主节点是否存活。如果主节点在指定的时间内没有响应，哨兵会认为主节点出现了故障。
当一个哨兵检测到主节点故障后，会与其他哨兵沟通，进行故障确认。如果大多数哨兵都认为主节点故障，才会开始故障转移流程。
在进行故障转移前，哨兵们需要选举出一个领导哨兵来负责故障转移的具体操作。选举过程使用 Raft 的选举算法，每个哨兵投票选举领导哨兵，得票最多者当选。
领导哨兵将选定的从节点提升为新的主节点，并将其他从节点重新配置为从新的主节点复制数据。同时，通知所有的哨兵和客户端新的主节点信息。
新的主节点会与其他从节点进行数据同步，确保数据的一致性。